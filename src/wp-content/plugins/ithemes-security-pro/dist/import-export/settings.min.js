this.itsec=this.itsec||{},this.itsec["import-export"]=this.itsec["import-export"]||{},this.itsec["import-export"].settings=(window.itsecWebpackJsonP=window.itsecWebpackJsonP||[]).push([[24],{"0x0D":function(e,t,c){"use strict";c.r(t);var n=c("GRId"),r=c("TvNi"),a=c("l3Sj"),o=c("Ty5D"),s=c("55Ip"),l=c("1ZqX"),i=c("tI+e"),u=c("on51"),p=c("daJv"),m=c("ppSj"),O=c("Td6G"),b=c("YLtl"),d=c("Iab2"),j=c("FqII"),E=c("49++");c("jcGb");const _=e=>new Promise(t=>setTimeout(t,e));function f(){const{url:e}=Object(o.k)(),[t,c]=Object(n.useState)(!1),[r,O]=Object(n.useState)(!1),[f,g,h,x]=Object(m.f)(),{exports:N,sources:S}=Object(l.useSelect)(e=>({exports:e(p.STORE_NAME).getExports(),sources:e(p.STORE_NAME).getSources()}),[]),{deleteExports:w}=Object(l.useDispatch)(p.STORE_NAME);return Object(n.createElement)(React.Fragment,null,Object(n.createElement)(u.PageHeader,{title:Object(a.__)("Manage Exports","it-l10n-ithemes-security-pro"),subtitle:Object(a.__)("Download, import, or create a new security settings export.","it-l10n-ithemes-security-pro")}),Object(n.createElement)(i.Card,{className:"itsec-exports-card"},Object(n.createElement)(i.CardHeader,{size:"extraSmall",isBorderless:!0},Object(n.createElement)(i.Button,{icon:"download",text:Object(a.__)("Download","it-l10n-ithemes-security-pro"),disabled:0===f.length||r,isBusy:r,onClick:async()=>{O(!0);for(const e of N)if(f.includes(e.id)){const t=new window.Blob([JSON.stringify(Object(b.omit)(e,["_links"]))],{type:"text/plain;charset=utf-8"}),c=e.metadata.title?Object(b.kebabCase)(e.metadata.title):Object(j.gmdate)("y-m-d",e.metadata.exported_at);Object(d.saveAs)(t,`itsec-export-${c}.json`),await _(1e3)}O(!1)}}),Object(n.createElement)(i.Button,{icon:"trash",text:Object(a.__)("Delete","it-l10n-ithemes-security-pro"),disabled:0===f.length||t,isBusy:t,onClick:async()=>{c(!0),await w(f),c(!1),x([])}}),Object(n.createElement)(E.j,null),Object(n.createElement)(s.a,{to:"/import",component:Object(m.j)(i.Button),text:Object(a.__)("Import","it-l10n-ithemes-security-pro"),icon:"upload"}),Object(n.createElement)(s.a,{to:e+"/create",component:Object(m.j)(i.Button),isSecondary:!0},Object(a.__)("Create New Export","it-l10n-ithemes-security-pro"))),Object(n.createElement)(i.CardBody,null,Object(n.createElement)(R,{exports:N,sources:S,selected:f,addSelected:g,removeSelected:h,setSelected:x}))),Object(n.createElement)(u.HelpFill,null,Object(n.createElement)(u.PageHeader,{title:Object(a.__)("Manage Exports","it-l10n-ithemes-security-pro")}),Object(n.createElement)(E.k,{topic:"export"})))}var g=c("pVnL"),h=c.n(g),x=c("V7jF"),N=c("TSYQ"),S=c.n(N),w=c("tMTs");c("Xudl");const y=Object(x.c)(w.b);function C(e){let{sources:t,isCreating:c,createExport:r,titleRequired:o,children:s}=e;const[l,u]=Object(n.useState)(""),[p,O]=Object(n.useState)(""),[d,j]=Object(n.useState)({}),[_,f,g,x]=Object(m.f)(Object(b.map)(t,"slug"));Object(n.useEffect)(()=>x(Object(b.map)(t,"slug")),[t]);const N=t.map(e=>({name:e.slug,title:e.title,description:e.description,render(t){let{name:c,text:r,...a}=t;return Object(n.createElement)(I,h()({source:e,options:d,setOptions:j,isIncluded:_.includes(e.slug),addSource:f,removeSource:g},a))}}));return Object(n.createElement)("form",{onSubmit:e=>{e.preventDefault(),r({title:p,sources:_,options:d})}},Object(n.createElement)(i.Card,{className:"itsec-export-form"},Object(n.createElement)(i.CardHeader,{size:"extraSmall"},Object(n.createElement)(i.CheckboxControl,{label:Object(a.__)("Include All Data","it-l10n-ithemes-security-pro"),className:"itsec-export-form__include-all",checked:t.every(e=>_.includes(e.slug)),onChange:e=>x(e?Object(b.map)(t,"slug"):[])}),Object(n.createElement)(E.j,null),Object(n.createElement)(i.TextControl,{label:Object(a.__)("Export Name","it-l10n-ithemes-security-pro"),className:"itsec-export-form__name",value:p,onChange:O,required:o})),Object(n.createElement)(i.CardBody,null,Object(n.createElement)(E.a,{className:"itsec-export-form__sources",expanded:l,setExpanded:u,panels:N,isStyled:!0,allowNone:!0}))),Object(n.createElement)(i.Flex,null,s,Object(n.createElement)(E.j,null),Object(n.createElement)(i.Button,{isPrimary:!0,type:"submit",disabled:!_.length||c,isBusy:c},Object(a.__)("Create","it-l10n-ithemes-security-pro"))))}function I(e){let{source:t,options:c,setOptions:r,isIncluded:o,addSource:s,removeSource:l,...u}=e;return Object(n.createElement)("div",u,Object(n.createElement)("div",{className:"itsec-export-form__include-source"},Object(n.createElement)(i.CheckboxControl,{label:Object(a.sprintf)(Object(a.__)("Include “%s” in Export","it-l10n-ithemes-security-pro"),t.title),checked:o,onChange:e=>e?s(t.slug):l(t.slug)})),t.options&&o&&Object(n.createElement)(v,{source:t,options:c,setOptions:r}))}function v(e){let{source:t,options:r,setOptions:a}=e;return Object(n.createElement)(y,{tagName:"div",className:S()("rjsf","itsec-export-form__options-form","itsec-export-form__options-form--"+t.slug),additionalMetaSchemas:[c("3jBn")],schema:t.options,uiSchema:t.options.uiSchema,idPrefix:"itsec_"+t.slug,formData:r[t.slug],onChange:e=>{a({...r,[t.slug]:e.formData})}},Object(n.createElement)(React.Fragment,null))}c("TgFk");function R(e){let{exports:t,sources:c,singleSelection:r,selected:o,addSelected:s,removeSelected:l,setSelected:i,isLoading:u=!1}=e;const p=e=>t=>{r?i(t?[e]:[]):t?s(e):l(e)},m=t.length>0?t.map(e=>Object(n.createElement)("tr",{key:e.id},Object(n.createElement)("td",{className:"itsec-exports-table__column-cb"},Object(n.createElement)(E.d,{label:Object(a.sprintf)(Object(a.__)("Select %s","it-l10n-ithemes-security-pro"),e.metadata.title),hideLabelFromVision:!0,className:"itsec-exports-table__export-cb",checked:o.includes(e.id),onChange:p(e.id)})),Object(n.createElement)("th",{className:"itsec-exports-table__column-name"},e.metadata.title),Object(n.createElement)("td",{className:"itsec-exports-table__column-date"},Object(j.dateI18n)("M j, Y",e.metadata.exported_at)),Object(n.createElement)("td",{className:"itsec-exports-table__column-content"},Object.keys(e.sources).map(e=>{var t;return(null===(t=Object(b.find)(c,{slug:e}))||void 0===t?void 0:t.title)||e}).join(", ")))):Object(n.createElement)("tr",null,Object(n.createElement)("td",{colSpan:4},Object(a.__)("No exports found.","it-l10n-ithemes-security-pro")));return Object(n.createElement)("table",{className:"itsec-exports-list"},Object(n.createElement)("thead",null,Object(n.createElement)("tr",null,Object(n.createElement)("th",{className:"itsec-exports-table__column-cb"},!r&&Object(n.createElement)(E.d,{label:Object(a.__)("Select All Exports","it-l10n-ithemes-security-pro"),hideLabelFromVision:!0,className:"itsec-exports-table__export-cb",checked:t.length>0&&t.every(e=>o.includes(e.id)),onChange:e=>i(e?Object(b.map)(t,"id"):[])})),Object(n.createElement)("th",{className:"itsec-exports-table__column-name"},Object(a.__)("Name","it-l10n-ithemes-security-pro")),Object(n.createElement)("th",{className:"itsec-exports-table__column-date"},Object(a.__)("Date","it-l10n-ithemes-security-pro")),Object(n.createElement)("th",{className:"itsec-exports-table__column-content"},Object(a.__)("Content","it-l10n-ithemes-security-pro")))),Object(n.createElement)("tbody",null,u?Object(n.createElement)("tr",null,Object(n.createElement)("td",{colSpan:4,className:"itsec-exports-table__loading-message"},Object(a.__)("Loading exports…","it-l10n-ithemes-security-pro"))):m))}var L=c("z1rk");c("iS9/");function T(){const{roles:e,targets:t,map:c}=Object(l.useSelect)(e=>({roles:e(L.CORE_STORE_NAME).getRoles(),map:e(p.STORE_NAME).getImportRoleMap(),targets:e(p.STORE_NAME).getImportExportRoleReplacementTargets()}),[]),{editImportRoleMap:r}=Object(l.useDispatch)(p.STORE_NAME);return t.length&&e?Object(n.createElement)(M,{title:Object(a.__)("Replace Roles","it-l10n-ithemes-security-pro"),description:Object(a.__)("Choose the user roles that best match the roles from the export.","it-l10n-ithemes-security-pro")},t.map(t=>Object(n.createElement)(k,{key:t.slug,target:t,value:c,onChange:r,roles:e}))):null}function A(){const{targets:e,map:t}=Object(l.useSelect)(e=>({map:e(p.STORE_NAME).getImportUserMap(),targets:e(p.STORE_NAME).getImportExportUserReplacementTargets()}),[]),{editImportUserMap:c}=Object(l.useDispatch)(p.STORE_NAME);return e.length?Object(n.createElement)(M,{title:Object(a.__)("Replace Users","it-l10n-ithemes-security-pro"),description:Object(a.__)("Choose the users that best match the users from the export.","it-l10n-ithemes-security-pro")},e.map(e=>Object(n.createElement)(B,{key:e.id,target:e,value:t,onChange:c}))):null}function M(e){let{title:t,description:c,children:r}=e;return Object(n.createElement)("fieldset",{className:"itsec-import-export-entity-map"},Object(n.createElement)("legend",{className:"itsec-import-export-entity-map__title"},t),Object(n.createElement)("p",{className:"itsec-import-export-entity-map__description"},c),r)}function k(e){var t;let{target:c,value:r,onChange:a,roles:o}=e;const s=Object.entries(o).map(e=>{let[t,c]=e;return{value:t,label:c.label}}).concat({value:"",label:""});return Object(n.createElement)(E.u,{label:c.label,value:null!==(t=r[c.slug])&&void 0!==t?t:o[c.slug]?c.slug:"",onChange:e=>a({...r,[c.slug]:e}),options:s})}function B(e){let{target:t,value:c,onChange:r}=e;return Object(n.createElement)(E.h,{value:c[t.id]||0,onChange:e=>r({...c,[t.id]:e}),label:Object(a.sprintf)(Object(a.__)("%1$ss (%2$s)","it-l10n-ithemes-security-pro"),t.name,t.email),path:"/wp/v2/users",labelAttr:"name"})}var D=c("rmEH");c("9tQZ");function P(e){let{showSpinner:t,isConnected:c}=e;const{url:r,discovery:o}=Object(l.useSelect)(e=>({url:e(p.STORE_NAME).getWpConnectSiteUrl(),discovery:e(p.STORE_NAME).getWpConnectDiscoveryResult()}),[]),s=Object(b.get)(o,["data","index","home"]),i=Object(b.get)(o,["data","index","name"]),u=Object(b.get)(o,["data","index","description"]),m=Object(b.get)(o,["data","index","_embedded","wp:featuredmedia",0]),O=m&&function(e,t){const c=t.width?"width":"height",n=Object(b.sortBy)(e.media_details.sizes,c);for(const e of n)if(e[c]>t[c])return e;if(n.length)return Object(b.last)(n);return{height:e.media_details.height||t.height,width:e.media_details.width||t.width,source_url:e.source_url}}(m,{width:60});let d;return d=c?Object(a.__)("Connected to %s","it-l10n-ithemes-security-pro"):Object(a.__)("Connecting to %s","it-l10n-ithemes-security-pro"),Object(n.createElement)("div",{className:"itsec-import-wordpress-connect-header"},O&&Object(n.createElement)("img",{src:O.source_url,height:O.height,width:O.width,alt:m.alt_text}),Object(n.createElement)("div",{className:"itsec-import-wordpress-connect-header__details"},Object(n.createElement)("h3",null,Object(a.sprintf)(d,s||r)),i&&Object(n.createElement)("span",{className:"itsec-import-wordpress-connect-header__name"},Object(D.decodeEntities)(i)),u&&Object(n.createElement)("span",{className:"itsec-import-wordpress-connect-header__description"},Object(D.decodeEntities)(u))),t&&Object(n.createElement)(E.w,{color:"--itsec-primary-theme-color"}))}function F(){return Object(n.createElement)(u.Page,{id:"exports",title:Object(a.__)("Exports","it-l10n-ithemes-security-pro"),icon:"download",location:"advanced"},()=>Object(n.createElement)(U,null))}function U(){const{path:e}=Object(o.k)();return Object(n.createElement)(o.d,null,Object(n.createElement)(o.b,{path:e+"/create",component:W}),Object(n.createElement)(o.b,{component:f}))}function W(){const{sources:e,isCreating:t,lastResult:c}=Object(l.useSelect)(e=>({sources:e(p.STORE_NAME).getSources(),isCreating:e(p.STORE_NAME).isCreatingExport(),lastResult:e(p.STORE_NAME).getLastCreatedExportResult()}),[]),{createExport:r}=Object(l.useDispatch)(p.STORE_NAME);return Object(n.createElement)(React.Fragment,null,Object(n.createElement)(u.PageHeader,{title:Object(a.__)("Create New Export","it-l10n-ithemes-security-pro"),subtitle:Object(a.__)("Choose which elements of iThemes Security to include in the export.","it-l10n-ithemes-security-pro")}),(null==c?void 0:c.isSuccess())&&Object(n.createElement)(E.q,{type:"success",hasBorder:!0,messages:[Object(n.createInterpolateElement)(Object(a.__)("Export created. <a>Back to list</a>.","it-l10n-ithemes-security-pro"),{a:Object(n.createElement)(s.a,{to:"/settings/exports"})})]}),Object(n.createElement)(E.t,{result:c,hasBorder:!0}),e.length>0&&Object(n.createElement)(C,{sources:e,isCreating:t,createExport:r,titleRequired:!0}),Object(n.createElement)(u.HelpFill,null,Object(n.createElement)(u.PageHeader,{title:Object(a.__)("Create New Export","it-l10n-ithemes-security-pro")}),Object(n.createElement)(E.k,{topic:"create-export",fallback:"export"})))}function H(){return Object(n.createElement)(u.Page,{id:"select-export",title:Object(a.__)("Select Export","it-l10n-ithemes-security-pro"),roots:["import"],priority:0},()=>Object(n.createElement)(q,null))}function q(){const{path:e,url:t}=Object(o.k)();return Object(n.createElement)(React.Fragment,null,Object(n.createElement)(o.d,null,Object(n.createElement)(o.b,{path:e+"/wordpress-create",render:()=>Object(n.createElement)(ae,{baseUrl:t})}),Object(n.createElement)(o.b,{path:e+"/wordpress-select",render:()=>Object(n.createElement)(re,{baseUrl:t})}),Object(n.createElement)(o.b,{path:e+"/wordpress-connect",render:()=>Object(n.createElement)(Z,{baseUrl:t})}),Object(n.createElement)(o.b,{path:e+"/summary",render:()=>Object(n.createElement)(oe,{baseUrl:t})}),Object(n.createElement)(o.b,{path:e,render:()=>Object(n.createElement)(z,{baseUrl:t})})),Object(n.createElement)(u.HelpFill,null,Object(n.createElement)(u.PageHeader,{title:Object(a.__)("Import","it-l10n-ithemes-security-pro")}),Object(n.createElement)(E.k,{topic:"import"})))}c("7oyf");function z(e){let{baseUrl:t}=e;const c=Object(u.useNavigateTo)(),{url:r}=Object(o.k)(),{validateExportFile:s,resetImport:m}=Object(l.useDispatch)(p.STORE_NAME),O=async e=>{e.length&&(await s(e[0]),c(t+"/summary"))};return Object(n.useEffect)(()=>{m()},[]),Object(n.createElement)(React.Fragment,null,Object(n.createElement)(u.PageHeader,{title:Object(a.__)("Select Export","it-l10n-ithemes-security-pro"),description:Object(a.__)("Either upload an export file, or enter the URL of a website running iThemes Security.","it-l10n-ithemes-security-pro")}),Object(n.createElement)("div",{className:"itsec-import-select-export-choices"},Object(n.createElement)(i.FormFileUpload,{onChange:e=>O(e.target.files),accept:"text/plain,application/json,application/zip",render:e=>{let{openFileDialog:t}=e;return Object(n.createElement)(u.SelectableCard,{title:Object(a.__)("Upload File","it-l10n-ithemes-security-pro"),description:Object(a.__)("Upload an iThemes Security export file from your computer.","it-l10n-ithemes-security-pro"),icon:"upload",direction:"vertical",onClick:t})}}),Object(n.createElement)(u.SelectableCard,{title:Object(a.__)("WordPress Site","it-l10n-ithemes-security-pro"),description:Object(a.__)("Import from a WordPress site running iThemes Security.","it-l10n-ithemes-security-pro"),icon:"wordpress",direction:"vertical",to:r+"/wordpress-connect"})),Object(n.createElement)(i.DropZone,{className:"itsec-import-export-dropzone",onFilesDrop:O}))}var G=c("TZi5"),V=c("Mmq9");c("6RBP");const{Slot:X,Fill:Y}=Object(i.createSlotFill)("ImportExportWordPressConnect");function Z(e){let{baseUrl:t}=e;const{step:c,url:r,discoveredApi:o,isExpired:s,isDeleting:m}=Object(l.useSelect)(e=>({step:e(p.STORE_NAME).getWpConnectStep(),url:e(p.STORE_NAME).getWpConnectSiteUrl(),discoveredApi:e(p.STORE_NAME).getWpConnectDiscoveryResult(),isExpired:e(p.STORE_NAME).areWpConnectCredentialsExpired(),isDeleting:e(p.STORE_NAME).isDeletingWpConnectCredential()}),[]),{wpConnectReset:O,wpConnectEnterWebsite:b,wpConnectDiscoverRestApi:d,wpConnectApplicationApproved:j,wpConnectApplicationRejected:_}=Object(l.useDispatch)(p.STORE_NAME),[f,g]=Object(G.f)({user_login:G.d,password:G.d,site_url:G.d,success:G.d});Object(n.useEffect)(()=>{f.site_url&&f.user_login&&f.password?j(f.site_url,{username:f.user_login,password:f.password}):"false"===f.success&&_(),g({},"replace")},[f]);const h=["enterWebsite","discovering"].includes(c);return Object(n.createElement)(React.Fragment,null,Object(n.createElement)(u.PageHeader,{title:Object(a.__)("Connect to WordPress","it-l10n-ithemes-security-pro"),description:Object(a.__)("Import from a WordPress site running iThemes Security.","it-l10n-ithemes-security-pro")}),Object(n.createElement)("form",{onSubmit:e=>{e.preventDefault(),"enterWebsite"===c&&d(r)}},Object(n.createElement)(i.Card,{className:"itsec-import-wordpress-connect"},!h&&Object(n.createElement)(i.CardHeader,null,Object(n.createElement)(P,{showSpinner:"appAuthed"===c})),Object(n.createElement)(i.CardBody,null,h&&Object(n.createElement)(J,{url:r,setUrl:b,isDiscovering:"discovering"===c}),Object(n.createElement)(E.t,{result:o}),Object(n.createElement)(ee,{step:c}),Object(n.createElement)(te,{step:c}),Object(n.createElement)($,{step:c,isExpired:s}),Object(n.createElement)(Q,{step:c}),Object(n.createElement)(ce,{step:c}),Object(n.createElement)(K,{step:c,baseUrl:t,isExpired:s}))),Object(n.createElement)(i.Flex,null,!h&&Object(n.createElement)(i.Button,{text:Object(a.__)("Start Again","it-l10n-ithemes-security-pro"),onClick:O,isBusy:m,disabled:m,isSecondary:!0}),Object(n.createElement)(E.j,null),Object(n.createElement)(X,null))))}function J(e){let{url:t,setUrl:c,isDiscovering:r}=e;return Object(n.createElement)(React.Fragment,null,Object(n.createElement)(i.TextControl,{type:"url",label:Object(a.__)("WordPress URL","it-l10n-ithemes-security-pro"),value:t,onChange:c}),Object(n.createElement)(Y,null,Object(n.createElement)(i.Button,{text:Object(a.__)("Connect","it-l10n-ithemes-security-pro"),type:"submit",isPrimary:!0,isBusy:r,disabled:r})))}function $(e){let{step:t,isExpired:c}=e;const{endpoint:r}=Object(l.useSelect)(e=>({endpoint:e(p.STORE_NAME).getWpConnectAppPasswordsAuthEndpoint()}),[]);if(!["awaitingAuth","appRejected"].includes(t)&&!c)return null;const o=(s=r,Object(V.addQueryArgs)(s,{app_name:Object(a.sprintf)(Object(a.__)("iThemes Security Import (%1$s) on %2$s","it-l10n-ithemes-security-pro"),window.location.hostname,Object(j.dateI18n)("M j")),app_id:"0fc6ff2d-d96f-5033-838f-90cc2bf48d9d",success_url:window.location.href}));var s;return Object(n.createElement)(React.Fragment,null,c&&Object(n.createElement)(E.q,{type:"warning",messages:Object(a.__)("Authentication expired. Please reauthorize iThemes Security.","it-l10n-ithemes-security-pro")}),Object(n.createElement)(E.q,{type:"info",title:Object(a.__)("Continue Authentication","it-l10n-ithemes-security-pro"),messages:Object(n.createInterpolateElement)(Object(a.__)("<a>Authorize iThemes Security</a> to connect to your WordPress site to continue the import process.","it-l10n-ithemes-security-pro"),{a:Object(n.createElement)("a",{href:o})})}),Object(n.createElement)(Y,null,Object(n.createElement)(i.Button,{text:Object(a.__)("Authorize iThemes Security","it-l10n-ithemes-security-pro"),href:o,isPrimary:!0})))}function Q(e){let{step:t}=e;return null}function K(e){let{step:t,baseUrl:c,isExpired:r}=e;return r||!["appAuthed","hasSupport"].includes(t)?null:Object(n.createElement)(Y,null,Object(n.createElement)(s.a,{to:c+"/wordpress-select",component:Object(m.j)(i.Button),isPrimary:!0,text:Object(a.__)("Select Export","it-l10n-ithemes-security-pro"),disabled:"appAuthed"===t}))}function ee(e){let{step:t}=e;return"noAppPasswords"===t&&Object(n.createElement)(E.q,{type:"error",messages:Object(a.__)("The website cannot be connected to because it does not support Application Passwords.","it-l10n-ithemes-security-pro")})}function te(e){let{step:t}=e;return"appRejected"===t&&Object(n.createElement)(E.q,{type:"error",messages:Object(a.__)("Application was not approved. You must click “I approve of this connection” to continue.","it-l10n-ithemes-security-pro")})}function ce(e){let{step:t}=e;return"noSupport"===t&&Object(n.createElement)(E.q,{type:"error",messages:Object(a.__)("The website must be running iThemes Security 7.1 or later.","it-l10n-ithemes-security-pro")})}function ne(){let{allowLax:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=Object(u.useNavigateTo)(),{credentials:c,hasExports:r}=Object(l.useSelect)(e=>({credentials:e(p.STORE_NAME).getWpConnectCredentials(),hasExports:e(p.STORE_NAME).hasWpConnectExports()}),[]);Object(n.useEffect)(()=>{c||r&&e||t("/import/select-export/wordpress-connect")},[c,r])}c("o9nh");function re(e){let{baseUrl:t}=e;ne({allowLax:!0});const c=Object(u.useNavigateTo)(),{exports:r,sources:o,isLoading:O}=Object(l.useSelect)(e=>({exports:e(p.STORE_NAME).getWpConnectExports(),sources:e(p.STORE_NAME).getWpConnectSources(),isLoading:!e(p.STORE_NAME).hasFinishedResolution("getWpConnectExports")||!e(p.STORE_NAME).hasFinishedResolution("getWpConnectSources")}),[]),{validateExportData:d}=Object(l.useDispatch)(p.STORE_NAME),[j,_]=Object(n.useState)([]);return Object(n.createElement)(React.Fragment,null,Object(n.createElement)(u.PageHeader,{title:Object(a.__)("Pick from WordPress","it-l10n-ithemes-security-pro"),description:Object(a.__)("Select an existing iThemes Security export or create a new one.","it-l10n-ithemes-security-pro")}),Object(n.createElement)("form",{onSubmit:async e=>{e.preventDefault();const n=Object(b.find)(r,{id:j[0]});n&&(await d(n),c(t+"/summary"))}},Object(n.createElement)(i.Card,null,Object(n.createElement)(i.CardBody,null,Object(n.createElement)(P,{isConnected:!0}))),Object(n.createElement)(i.Card,{className:"itsec-import-wordpress-connect-select-export"},Object(n.createElement)(i.CardBody,null,Object(n.createElement)(R,{exports:r,sources:o,singleSelection:!0,selected:j,setSelected:_,isLoading:O}))),Object(n.createElement)(i.Flex,null,Object(n.createElement)(E.j,null),Object(n.createElement)(s.a,{to:t+"/wordpress-create",component:Object(m.j)(i.Button),disabled:j.length>0,text:Object(a.__)("Create Export","it-l10n-ithemes-security-pro"),isSecondary:!0}),Object(n.createElement)(i.Button,{disabled:0===j.length,text:Object(a.__)("Select Export","it-l10n-ithemes-security-pro"),isPrimary:!0,type:"submit"}))))}function ae(e){let{baseUrl:t}=e;ne();const c=Object(u.useNavigateTo)(),{sources:r,isCreating:o,result:O}=Object(l.useSelect)(e=>({sources:e(p.STORE_NAME).getWpConnectSources(),isCreating:e(p.STORE_NAME).wpConnectIsCreating(),result:e(p.STORE_NAME).getWpConnectExport()}),[]),{wpConnectCreateExport:b,validateExportData:d}=Object(l.useDispatch)(p.STORE_NAME);return Object(n.createElement)(React.Fragment,null,Object(n.createElement)(u.PageHeader,{title:Object(a.__)("Create New Export","it-l10n-ithemes-security-pro")}),Object(n.createElement)(E.t,{result:O,hasBorder:!0}),Object(n.createElement)(i.Card,null,Object(n.createElement)(i.CardBody,null,Object(n.createElement)(P,{isConnected:!0}))),Object(n.createElement)(C,{sources:r,isCreating:o,createExport:async e=>{const n=await b(e);n.isSuccess()&&(await d(n.data),c(t+"/summary"))}},Object(n.createElement)(s.a,{to:t+"/wordpress-select",isSecondary:!0,text:Object(a.__)("Back","it-l10n-ithemes-security-pro"),component:Object(m.j)(i.Button)})))}c("tzjP");function oe(e){let{baseUrl:t}=e;const{goNext:c}=Object(u.useNavigation)(),{result:r,data:o,sources:O,exportSource:b,selectedSources:d}=Object(l.useSelect)(e=>({result:e(p.STORE_NAME).getImportExportValidationResult(),data:e(p.STORE_NAME).getImportExportData(),sources:e(p.STORE_NAME).getSources(),exportSource:e(p.STORE_NAME).getImportExportSource(),selectedSources:e(p.STORE_NAME).getImportSources()}),[]),{applyExportData:j,editImportSources:_}=Object(l.useDispatch)(p.STORE_NAME);Object(n.useEffect)(()=>{_(Object.keys((null==o?void 0:o.sources)||{}))},[o]);const f=O.filter(e=>null==o?void 0:o.sources[e.slug]).map(e=>({value:e.slug,label:e.title,help:e.description})),[g,h]=Object(n.useState)(!1);return Object(n.createElement)(React.Fragment,null,Object(n.createElement)(u.PageHeader,{title:Object(a.__)("Import Summary","it-l10n-ithemes-security-pro")}),Object(n.createElement)(E.t,{result:r}),Object(n.createElement)(i.Card,null,"connect"===b&&Object(n.createElement)(i.CardHeader,null,Object(n.createElement)(P,{isConnected:!0})),Object(n.createElement)(se,{data:o,source:b})),o&&Object(n.createElement)(i.Card,null,Object(n.createElement)(i.CardBody,null,Object(n.createElement)(E.e,{label:Object(a.__)("Export Data","it-l10n-ithemes-security-pro"),help:Object(a.__)("Choose what iThemes Security info you’d like to import.","it-l10n-ithemes-security-pro"),value:d,onChange:_,options:f,className:"itsec-import-summary-select-data"}),d.length>0&&Object(n.createElement)(React.Fragment,null,Object(n.createElement)(A,null),Object(n.createElement)(T,null)))),Object(n.createElement)(i.Flex,null,Object(n.createElement)(s.a,{to:le(t,b),isSecondary:!0,component:Object(m.j)(i.Button),text:Object(a.__)("Back","it-l10n-ithemes-security-pro")}),Object(n.createElement)(E.j,null),Object(n.createElement)(i.Button,{onClick:async()=>{h(!0),await j(),h(!1),c()},isPrimary:!0,isBusy:g,disabled:g||!d.length,text:Object(a.__)("Continue","it-l10n-ithemes-security-pro")})))}function se(e){let{data:t,source:c}=e,r=t.metadata.title;return r||"connect"===c||(r=Object(a.sprintf)(Object(a.__)("Exported from %s","it-l10n-ithemes-security-pro"),t.metadata.home_url)),Object(n.createElement)(i.CardBody,{className:"itsec-import-summary-export-details"},r&&Object(n.createElement)("h3",null,t.metadata.title),Object(n.createElement)("span",null,Object(a.sprintf)(Object(a.__)("Exported on %s","it-l10n-ithemes-security-pro"),Object(j.dateI18n)("M j, Y",t.metadata.exported_at))),Object(n.createElement)("span",null,Object(a.sprintf)(Object(a.__)("Version %s","it-l10n-ithemes-security-pro"),t.metadata.version)))}function le(e,t){switch(t){case"connect":return e+"/wordpress-select";default:return e}}c("O02R");function ie(){return pe(),Object(n.createElement)(React.Fragment,null,Object(n.createElement)(H,null),Object(n.createElement)(F,null),Object(n.createElement)(u.ToolbarFill,null,Object(n.createElement)(ue,null)))}function ue(){const{root:e}=Object(o.j)();return"onboard"!==e?null:Object(n.createElement)(s.a,{to:"/import",component:Object(m.j)(i.ToolbarButton),text:Object(a.__)("Import","it-l10n-ithemes-security-pro"),icon:"upload"})}function pe(){const{registerCompletionStep:e}=Object(l.useDispatch)(u.ONBOARD_STORE_NAME),{completeImport:t,resetImport:c,wpConnectReset:r}=Object(l.useDispatch)(p.STORE_NAME);Object(m.g)(pe,()=>{e({id:"import",label:Object(a.__)("Complete Import","it-l10n-ithemes-security-pro"),priority:100,activeCallback(e){let{root:t}=e;return"import"===t},async callback(){const e=await t();if(e.type!==O.b.SUCCESS)throw{code:e.error.getErrorCode(),message:e.error.getAllErrorMessages().join(" ")};await c(),await r()},render:function(){return Object(n.createElement)("p",null,Object(a.__)("Import remaining export data.","it-l10n-ithemes-security-pro"))}})})}c.p=window.itsecWebpackPublicPath,Object(a.setLocaleData)({"":{}},"ithemes-security-pro"),Object(r.registerPlugin)("itsec-import-export-settings",{render:()=>Object(n.createElement)(ie,null)})},"1ZqX":function(e,t){!function(){e.exports=this.wp.data}()},"6RBP":function(e,t,c){},"7oyf":function(e,t,c){},"9tQZ":function(e,t,c){},FqII:function(e,t){!function(){e.exports=this.wp.date}()},GRId:function(e,t){!function(){e.exports=this.wp.element}()},Iab2:function(e,t,c){(function(t){!function(e,t){"function"==typeof define&&define.amd?define([],t):t()}(0,(function(){"use strict";function c(e,t,c){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,c)},n.onerror=function(){console.error("could not download file")},n.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(c){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t&&t.global===t?t:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,t,o){var s=a.URL||a.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?r(l):n(l.href)?c(e,t,o):r(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){r(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,a){if(t=t||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,a),t);else if(n(e))c(e,t,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){r(o)}))}}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return c(e,t,n);var s="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&l||o)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},u.readAsDataURL(e)}else{var p=a.URL||a.webkitURL,m=p.createObjectURL(e);r?r.location=m:location.href=m,r=null,setTimeout((function(){p.revokeObjectURL(m)}),4e4)}});a.saveAs=s.saveAs=s,e.exports=s}))}).call(this,c("yLpj"))},K9lf:function(e,t){!function(){e.exports=this.wp.compose}()},Mmq9:function(e,t){!function(){e.exports=this.wp.url}()},O02R:function(e,t,c){},RxS6:function(e,t){!function(){e.exports=this.wp.keycodes}()},TgFk:function(e,t,c){},Tqx9:function(e,t){!function(){e.exports=this.wp.primitives}()},TvNi:function(e,t){!function(){e.exports=this.wp.plugins}()},Xudl:function(e,t,c){},YLtl:function(e,t){!function(){e.exports=this.lodash}()},cDcd:function(e,t){!function(){e.exports=this.React}()},daJv:function(e,t){!function(){e.exports=this.itsec["import-export"].data}()},faye:function(e,t){!function(){e.exports=this.ReactDOM}()},gdqT:function(e,t){!function(){e.exports=this.wp.a11y}()},"iS9/":function(e,t,c){},jcGb:function(e,t,c){},l3Sj:function(e,t){!function(){e.exports=this.wp.i18n}()},o9nh:function(e,t,c){},on51:function(e,t){!function(){e.exports=this.itsec.pages.settings}()},rl8x:function(e,t){!function(){e.exports=this.wp.isShallowEqual}()},rmEH:function(e,t){!function(){e.exports=this.wp.htmlEntities}()},"tI+e":function(e,t){!function(){e.exports=this.wp.components}()},tzjP:function(e,t,c){},ywyh:function(e,t){!function(){e.exports=this.wp.apiFetch}()},z1rk:function(e,t){!function(){e.exports=this.itsec.packages.data}()}},[["0x0D",0,4,1,2,6,8,3,5]]]);